<template>
  <div class="docs-container">
    <div class="docs-header">
      <h1>EsTable è¡¨æ ¼ç»„ä»¶</h1>
      <p class="component-desc">ä¼ä¸šçº§é«˜æ€§èƒ½è¡¨æ ¼ç»„ä»¶ï¼Œæ”¯æŒè‡ªåŠ¨æ•°æ®è¯·æ±‚ã€åˆ†é¡µç®¡ç†ã€åˆ—æ¸²æŸ“ã€æ¡ä»¶æŸ¥è¯¢è”åŠ¨ç­‰ç‰¹æ€§ï¼Œè®©æ•°æ®å±•ç¤ºå¼€å‘æ•ˆç‡æå‡ 80%</p>
      <div class="global-actions">
        <el-button size="small" @click="expandAll">
          <i class="el-icon-arrow-down"></i> å…¨éƒ¨å±•å¼€
        </el-button>
        <el-button size="small" @click="collapseAll">
          <i class="el-icon-arrow-up"></i> å…¨éƒ¨æ”¶èµ·
        </el-button>
      </div>
    </div>

    <h2>å¿«é€Ÿå¼€å§‹</h2>
    <p>æœ€ç®€å•çš„è¡¨æ ¼ç”¨æ³•ï¼Œåªéœ€é…ç½®æ•°æ®æºå’Œåˆ—å®šä¹‰ï¼š</p>

    <div class="demo-block">
      <div class="demo-block__header">
        <span class="demo-block__title">åŸºç¡€è¡¨æ ¼</span>
      </div>
      <div class="demo-block__body">
        <es-table
          :data-source="basicData"
          :columns="basicColumns"
          :options="{ border: true }"
        />
      </div>
      <div class="demo-block__code" :class="{ 'is-collapsed': !codeExpanded.scene1 }">
        <div class="code-header" @click="toggleCode('scene1')">
          <i :class="codeExpanded.scene1 ? 'el-icon-arrow-down' : 'el-icon-arrow-right'"></i>
          <span>{{ codeExpanded.scene1 ? 'æ”¶èµ·ä»£ç ' : 'å±•å¼€ä»£ç ' }}</span>
        </div>
        <pre v-show="codeExpanded.scene1"><code>{{ basicExample }}</code></pre>
      </div>
    </div>

    <h2>æ ¸å¿ƒç‰¹æ€§è¯¦è§£</h2>

    <h3>1. è‡ªåŠ¨æ•°æ®è¯·æ±‚ï¼ˆæ¨èï¼‰</h3>
    <p>é€šè¿‡ <code>apiParams</code> é…ç½®ï¼Œè¡¨æ ¼è‡ªåŠ¨å¤„ç†æ•°æ®è¯·æ±‚ã€åˆ†é¡µã€åŠ è½½çŠ¶æ€ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤ï¼š</p>
    
    <div class="demo-block">
      <div class="demo-block__header">
        <span class="demo-block__title">å…¨è‡ªåŠ¨æ•°æ®è¡¨æ ¼</span>
        <span class="demo-block__badge">ä¼ä¸šçº§å®æˆ˜</span>
      </div>
      <div class="demo-block__body">
        <es-table
          :data-source.sync="autoData"
          :columns="autoColumns"
          :pagination="autoPagination"
          :options="autoOptions"
        />
      </div>
      <div class="demo-block__code" :class="{ 'is-collapsed': !codeExpanded.scene2 }">
        <div class="code-header" @click="toggleCode('scene2')">
          <i :class="codeExpanded.scene2 ? 'el-icon-arrow-down' : 'el-icon-arrow-right'"></i>
          <span>{{ codeExpanded.scene2 ? 'æ”¶èµ·ä»£ç ' : 'å±•å¼€ä»£ç ' }}</span>
        </div>
        <pre v-show="codeExpanded.scene2"><code>{{ autoRequestExample }}</code></pre>
      </div>
    </div>

    <div class="tips-box tips-box--success">
      <h4>ğŸ’¡ æœ€ä½³å®è·µ</h4>
      <ul>
        <li>ä½¿ç”¨ <code>.sync</code> ä¿®é¥°ç¬¦ä¿æŒæ•°æ®åŒå‘åŒæ­¥</li>
        <li>é€šè¿‡ <code>configTableOut</code> æ˜ å°„åç«¯è¿”å›å­—æ®µï¼Œæ— éœ€ä¿®æ”¹æ¥å£</li>
        <li><code>brcb</code> å›è°ƒå¯åœ¨è¯·æ±‚å‰æ ¼å¼åŒ–å‚æ•°</li>
        <li><code>qrcb</code> å›è°ƒå¯å¤„ç†å“åº”æ•°æ®</li>
      </ul>
    </div>

    <h3>2. è‡ªå®šä¹‰è¯·æ±‚å®ä¾‹</h3>
    <p>å½“éœ€è¦ç»Ÿä¸€å¤„ç†è¯·æ±‚å¤´ã€é”™è¯¯å¤„ç†ã€Loading æ—¶ï¼Œé…ç½® <code>httpRequest</code>ï¼š</p>

    <div class="demo-block">
      <div class="demo-block__header">
        <span class="demo-block__title">è‡ªå®šä¹‰è¯·æ±‚å®ä¾‹</span>
      </div>
      <div class="demo-block__code" :class="{ 'is-collapsed': !codeExpanded.scene3 }">
        <div class="code-header" @click="toggleCode('scene3')">
          <i :class="codeExpanded.scene3 ? 'el-icon-arrow-down' : 'el-icon-arrow-right'"></i>
          <span>{{ codeExpanded.scene3 ? 'æ”¶èµ·ä»£ç ' : 'å±•å¼€ä»£ç ' }}</span>
        </div>
        <pre v-show="codeExpanded.scene3"><code>{{ customHttpExample }}</code></pre>
      </div>
    </div>

    <h3>3. åˆ—æ¸²æŸ“ - Render å‡½æ•°</h3>
    <p>æ”¯æŒ JSX å’Œ createElement ä¸¤ç§å†™æ³•ï¼Œçµæ´»æ¸²æŸ“è‡ªå®šä¹‰å†…å®¹ï¼š</p>

    <div class="demo-block">
      <div class="demo-block__header">
        <span class="demo-block__title">Render åˆ—æ¸²æŸ“</span>
      </div>
      <div class="demo-block__body">
        <es-table
          :data-source="renderData"
          :columns="renderColumns"
          :options="{ border: true }"
        />
      </div>
      <div class="demo-block__code" :class="{ 'is-collapsed': !codeExpanded.scene4 }">
        <div class="code-header" @click="toggleCode('scene4')">
          <i :class="codeExpanded.scene4 ? 'el-icon-arrow-down' : 'el-icon-arrow-right'"></i>
          <span>{{ codeExpanded.scene4 ? 'æ”¶èµ·ä»£ç ' : 'å±•å¼€ä»£ç ' }}</span>
        </div>
        <pre v-show="codeExpanded.scene4"><code>{{ renderColumnExample }}</code></pre>
      </div>
    </div>

    <div class="tips-box tips-box--warning">
      <h4>âš ï¸ é‡è¦æç¤º</h4>
      <p>Render å‡½æ•°å‚æ•°é¡ºåºä¸ºï¼š<code>(h, { row, index, instance })</code></p>
      <ul>
        <li><code>h</code> - createElement å‡½æ•°</li>
        <li><code>row</code> - å½“å‰è¡Œæ•°æ®</li>
        <li><code>index</code> - è¡Œç´¢å¼•</li>
        <li><code>instance</code> - è¡¨æ ¼ç»„ä»¶å®ä¾‹ï¼Œå¯è°ƒç”¨è¡¨æ ¼æ–¹æ³•</li>
      </ul>
    </div>

    <h3>4. è¡¨æ ¼ä¸è¡¨å•è”åŠ¨æŸ¥è¯¢</h3>
    <p>EsTable ä¸ EsForm å®Œç¾é…åˆï¼Œå®ç°æ¡ä»¶æŸ¥è¯¢ï¼š</p>

    <div class="demo-block">
      <div class="demo-block__header">
        <span class="demo-block__title">è¡¨æ ¼è¡¨å•è”åŠ¨</span>
        <span class="demo-block__badge">é«˜é¢‘ä½¿ç”¨</span>
      </div>
      <div class="demo-block__body">
        <es-table
          :data-source.sync="linkageData"
          :columns="linkageColumns"
          :pagination="linkagePagination"
          :options="linkageOptions"
        >
          <es-form
            :form-item-list="linkageFormConfig"
            :model="linkageFormData"
            :layout-form-props="linkageLayoutProps"
            :config-btn="linkageConfigBtn"
          />
        </es-table>
      </div>
      <div class="demo-block__code" :class="{ 'is-collapsed': !codeExpanded.scene5 }">
        <div class="code-header" @click="toggleCode('scene5')">
          <i :class="codeExpanded.scene5 ? 'el-icon-arrow-down' : 'el-icon-arrow-right'"></i>
          <span>{{ codeExpanded.scene5 ? 'æ”¶èµ·ä»£ç ' : 'å±•å¼€ä»£ç ' }}</span>
        </div>
        <pre v-show="codeExpanded.scene5"><code>{{ linkageExample }}</code></pre>
      </div>
    </div>

    <h3>5. æ“ä½œåˆ—ä¸è¡¨æ ¼å®ä¾‹</h3>
    <p>é€šè¿‡ instance è·å–è¡¨æ ¼å®ä¾‹ï¼Œè°ƒç”¨æ–¹æ³•ï¼ˆåˆ·æ–°ã€è·å–é€‰ä¸­é¡¹ç­‰ï¼‰ï¼š</p>

    <div class="demo-block">
      <div class="demo-block__header">
        <span class="demo-block__title">æ“ä½œåˆ—ç¤ºä¾‹</span>
      </div>
      <div class="demo-block__body">
        <es-table
          ref="actionTable"
          :data-source="actionData"
          :columns="actionColumns"
          :options="{ border: true }"
        />
      </div>
      <div class="demo-block__code" :class="{ 'is-collapsed': !codeExpanded.scene6 }">
        <div class="code-header" @click="toggleCode('scene6')">
          <i :class="codeExpanded.scene6 ? 'el-icon-arrow-down' : 'el-icon-arrow-right'"></i>
          <span>{{ codeExpanded.scene6 ? 'æ”¶èµ·ä»£ç ' : 'å±•å¼€ä»£ç ' }}</span>
        </div>
        <pre v-show="codeExpanded.scene6"><code>{{ actionColumnExample }}</code></pre>
      </div>
    </div>

    <h2>å®æˆ˜åœºæ™¯ç¤ºä¾‹</h2>

    <h3>åœºæ™¯ä¸€ï¼šå®Œæ•´çš„ç®¡ç†è¡¨æ ¼ï¼ˆå¢åˆ æ”¹æŸ¥ + æ¡ä»¶æŸ¥è¯¢ï¼‰</h3>
    <div class="demo-block demo-block--full">
      <div class="demo-block__header">
        <span class="demo-block__title">æ”¿ç­–ç®¡ç†è¡¨æ ¼ï¼ˆå®æˆ˜æ¡ˆä¾‹ï¼‰</span>
        <span class="demo-block__badge">ç”Ÿäº§çº§</span>
      </div>
      <div class="demo-block__body">
        <es-table
          :data-source.sync="policyData"
          :columns="policyColumns"
          :pagination="policyPagination"
          :options="policyOptions"
        >
          <es-form
            :form-item-list="policyFormConfig"
            :model="policyFormData"
            :layout-form-props="policyLayoutProps"
            :config-btn="policyConfigBtn"
          />
        </es-table>
      </div>
      <div class="demo-block__code" :class="{ 'is-collapsed': !codeExpanded.scene7 }">
        <div class="code-header" @click="toggleCode('scene7')">
          <i :class="codeExpanded.scene7 ? 'el-icon-arrow-down' : 'el-icon-arrow-right'"></i>
          <span>{{ codeExpanded.scene7 ? 'æ”¶èµ·ä»£ç ' : 'å±•å¼€ä»£ç ' }}</span>
        </div>
        <pre v-show="codeExpanded.scene7"><code>{{ realWorldExample }}</code></pre>
      </div>
    </div>

    <h2>API æ–‡æ¡£</h2>

    <h3>Props</h3>
    <table class="table-props">
      <thead>
        <tr>
          <th>å‚æ•°</th>
          <th>è¯´æ˜</th>
          <th>ç±»å‹</th>
          <th>é»˜è®¤å€¼</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>dataSource</td>
          <td>è¡¨æ ¼æ•°æ®æºï¼Œæ¨èé…åˆ .sync ä½¿ç”¨</td>
          <td>Array</td>
          <td>[]</td>
        </tr>
        <tr>
          <td>columns</td>
          <td>åˆ—é…ç½®æ•°ç»„</td>
          <td>Array</td>
          <td>[]</td>
        </tr>
        <tr>
          <td>pagination</td>
          <td>åˆ†é¡µé…ç½® { pageIndex, pageSize, total }</td>
          <td>Object</td>
          <td>{}</td>
        </tr>
        <tr>
          <td>options</td>
          <td>è¡¨æ ¼é€‰é¡¹é…ç½®ï¼ˆè¯¦è§ä¸‹æ–¹ Options é…ç½®ï¼‰</td>
          <td>Object</td>
          <td>{}</td>
        </tr>
      </tbody>
    </table>

    <h3>Options é…ç½®</h3>
    <table class="table-props">
      <thead>
        <tr>
          <th>å‚æ•°</th>
          <th>è¯´æ˜</th>
          <th>ç±»å‹</th>
          <th>é»˜è®¤å€¼</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>apiParams</td>
          <td>è‡ªåŠ¨è¯·æ±‚é…ç½® { url, method, model, headers, options }</td>
          <td>Object</td>
          <td>-</td>
        </tr>
        <tr>
          <td>configTableOut</td>
          <td>å“åº”å­—æ®µæ˜ å°„ { total, pageSize, current, tableData }</td>
          <td>Object</td>
          <td>-</td>
        </tr>
        <tr>
          <td>httpRequest</td>
          <td>è‡ªå®šä¹‰è¯·æ±‚å‡½æ•° (params) => Promise</td>
          <td>Function</td>
          <td>-</td>
        </tr>
        <tr>
          <td>listenToCallBack</td>
          <td>è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ { brcb: (params)=>{}, qrcb: (res)=>{} }</td>
          <td>Object</td>
          <td>-</td>
        </tr>
        <tr>
          <td>isInitRun</td>
          <td>åˆå§‹åŒ–æ—¶æ˜¯å¦è‡ªåŠ¨è¯·æ±‚</td>
          <td>Boolean</td>
          <td>false</td>
        </tr>
        <tr>
          <td>border</td>
          <td>æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡†</td>
          <td>Boolean</td>
          <td>false</td>
        </tr>
        <tr>
          <td>size</td>
          <td>è¡¨æ ¼å°ºå¯¸</td>
          <td>String</td>
          <td>'small'</td>
        </tr>
        <tr>
          <td>tabHeight</td>
          <td>è¡¨æ ¼é«˜åº¦(px)ï¼Œé…åˆ heightType ä½¿ç”¨</td>
          <td>Number</td>
          <td>-</td>
        </tr>
        <tr>
          <td>heightType</td>
          <td>é«˜åº¦ç±»å‹ï¼š'height' | 'max-height'</td>
          <td>String</td>
          <td>'max-height'</td>
        </tr>
        <tr>
          <td>multiSelect</td>
          <td>æ˜¯å¦æ”¯æŒå¤šé€‰</td>
          <td>Boolean</td>
          <td>false</td>
        </tr>
        <tr>
          <td>cachePageSelection</td>
          <td>è·¨é¡µè®°å¿†é€‰ä¸­é¡¹</td>
          <td>Boolean</td>
          <td>true</td>
        </tr>
      </tbody>
    </table>

    <h3>Column é…ç½®</h3>
    <table class="table-props">
      <thead>
        <tr>
          <th>å‚æ•°</th>
          <th>è¯´æ˜</th>
          <th>ç±»å‹</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>key / prop</td>
          <td>å­—æ®µå</td>
          <td>String</td>
        </tr>
        <tr>
          <td>label</td>
          <td>åˆ—æ ‡é¢˜</td>
          <td>String</td>
        </tr>
        <tr>
          <td>width</td>
          <td>åˆ—å®½åº¦</td>
          <td>String/Number</td>
        </tr>
        <tr>
          <td>fixed</td>
          <td>å›ºå®šåˆ—ï¼š'left' | 'right'</td>
          <td>String</td>
        </tr>
        <tr>
          <td>render</td>
          <td>è‡ªå®šä¹‰æ¸²æŸ“å‡½æ•° (h, { row, index, instance }) => VNode</td>
          <td>Function</td>
        </tr>
        <tr>
          <td>hidCol</td>
          <td>æ˜¯å¦éšè—åˆ—</td>
          <td>Boolean</td>
        </tr>
      </tbody>
    </table>

    <h3>Methods</h3>
    <table class="table-props">
      <thead>
        <tr>
          <th>æ–¹æ³•å</th>
          <th>è¯´æ˜</th>
          <th>å‚æ•°</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>httpRquestInstace</td>
          <td>æ‰‹åŠ¨è§¦å‘æ•°æ®è¯·æ±‚ï¼ˆç”¨äºåˆ·æ–°ï¼‰</td>
          <td>-</td>
        </tr>
        <tr>
          <td>clearAllSelection</td>
          <td>æ¸…ç©ºæ‰€æœ‰é€‰ä¸­é¡¹</td>
          <td>-</td>
        </tr>
        <tr>
          <td>toggleSelection</td>
          <td>åˆ‡æ¢è¡Œé€‰ä¸­çŠ¶æ€</td>
          <td>rows</td>
        </tr>
      </tbody>
    </table>

    <h2>å¼€å‘è§„èŒƒä¸å»ºè®®</h2>
    
    <div class="tips-box tips-box--info">
      <h4>ğŸ“‹ å¼€å‘è§„èŒƒ</h4>
      <ol>
        <li><strong>å­—æ®µå‘½å</strong>ï¼šåç«¯è¿”å›å­—æ®µä¸å‰ç«¯ä¸ä¸€è‡´æ—¶ï¼Œä½¿ç”¨ configTableOut æ˜ å°„ï¼Œä¸ä¿®æ”¹åç«¯æ¥å£</li>
        <li><strong>è¯·æ±‚å°è£…</strong>ï¼šç»Ÿä¸€é…ç½® httpRequestï¼Œé›†ä¸­å¤„ç† Tokenã€é”™è¯¯æç¤ºã€Loading</li>
        <li><strong>æŒ‰é’®æ“ä½œ</strong>ï¼šæ“ä½œåˆ—é€šè¿‡ instance.httpRquestInstace() åˆ·æ–°è¡¨æ ¼ï¼Œä¸ç›´æ¥ä¿®æ”¹æ•°æ®æº</li>
        <li><strong>æ—¥æœŸèŒƒå›´</strong>ï¼šä½¿ç”¨ brcb å›è°ƒå°†æ—¥æœŸèŒƒå›´æ‹†åˆ†ä¸º start/end ä¸¤ä¸ªå­—æ®µä¼ ç»™åç«¯</li>
        <li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¤§æ•°æ®é‡æ—¶è®¾ç½® tabHeight å›ºå®šè¡¨æ ¼é«˜åº¦ï¼Œå¯ç”¨è™šæ‹Ÿæ»šåŠ¨</li>
      </ol>
    </div>
  </div>
</template>

<script>
import {
  basicExample,
  autoRequestExample,
  customHttpExample,
  renderColumnExample,
  linkageExample,
  actionColumnExample,
  realWorldExample
} from './examples/esTableExamples'

export default {
  name: 'EsTableDocs',
  data() {
    return {
      // åŸºç¡€ç¤ºä¾‹æ•°æ®
      basicData: [
        { id: 1, name: 'å¼ ä¸‰', age: 25, email: 'zhangsan@example.com' },
        { id: 2, name: 'æå››', age: 30, email: 'lisi@example.com' },
        { id: 3, name: 'ç‹äº”', age: 28, email: 'wangwu@example.com' }
      ],
      basicColumns: [
        { key: 'id', label: 'ID', width: 80 },
        { key: 'name', label: 'å§“å', width: 120 },
        { key: 'age', label: 'å¹´é¾„', width: 80 },
        { key: 'email', label: 'é‚®ç®±' }
      ],

      // è‡ªåŠ¨è¯·æ±‚ç¤ºä¾‹
      autoData: [],
      autoColumns: [
        { key: 'title', label: 'æ”¿ç­–æ ‡é¢˜' },
        { key: 'status', label: 'çŠ¶æ€', render: (h, { row }) => {
          const statusMap = { '0': 'è‰ç¨¿', '1': 'å·²ä¸Šæ¶', '2': 'å·²ä¸‹æ¶' }
          return <el-tag type={row.status === '1' ? 'success' : 'info'}>{statusMap[row.status]}</el-tag>
        }},
        { key: 'createTime', label: 'åˆ›å»ºæ—¶é—´' }
      ],
      autoPagination: { pageIndex: 1, pageSize: 10, total: 0 },
      autoOptions: {
        isInitRun: true,
        border: true,
        apiParams: {
          url: '/api/policy/list',
          method: 'post'
        },
        configTableOut: {
          total: 'total',
          pageSize: 'pageSize',
          current: 'pageIndex',
          tableData: 'data'
        },
        listenToCallBack: {
          brcb: (params) => {
            // è¯·æ±‚å‰æ ¼å¼åŒ–å‚æ•°
            const { pageSize, pageIndex, ...rest } = params
            return { pageNum: pageIndex, pageSize, ...rest }
          },
          qrcb: (res) => {
            console.log('æŸ¥è¯¢ç»“æœ:', res)
          }
        }
      },

      // Render ç¤ºä¾‹
      renderData: [
        { id: 1, name: 'å¼ ä¸‰', status: '1', score: 85 },
        { id: 2, name: 'æå››', status: '0', score: 92 },
        { id: 3, name: 'ç‹äº”', status: '2', score: 78 }
      ],
      renderColumns: [
        { key: 'id', label: 'ID', width: 80 },
        { key: 'name', label: 'å§“å' },
        {
          key: 'status',
          label: 'çŠ¶æ€',
          render: (h, { row }) => {
            const statusMap = {
              '0': { text: 'è‰ç¨¿', type: 'info' },
              '1': { text: 'å·²ä¸Šæ¶', type: 'success' },
              '2': { text: 'å·²ä¸‹æ¶', type: 'danger' }
            }
            const status = statusMap[row.status]
            return <el-tag type={status.type}>{status.text}</el-tag>
          }
        },
        {
          key: 'score',
          label: 'è¯„åˆ†',
          render: (h, { row }) => {
            const color = row.score >= 90 ? '#67c23a' : row.score >= 80 ? '#e6a23c' : '#f56c6c'
            return (
              <div style="display: flex; align-items: center; gap: 10px;">
                <el-progress percentage={row.score} color={color} style="width: 100px;" />
                <span style={{ color }}>{row.score}åˆ†</span>
              </div>
            )
          }
        }
      ],

      // è”åŠ¨æŸ¥è¯¢ç¤ºä¾‹
      linkageData: [],
      linkageColumns: [
        { key: 'id', label: 'ç¼–å·', width: 80 },
        { key: 'name', label: 'åç§°' },
        { key: 'status', label: 'çŠ¶æ€' },
        { key: 'createTime', label: 'åˆ›å»ºæ—¶é—´' }
      ],
      linkagePagination: { pageIndex: 1, pageSize: 10, total: 0 },
      linkageOptions: {
        isInitRun: true,
        border: true,
        apiParams: { url: '/api/list', method: 'post' },
        configTableOut: { total: 'total', pageSize: 'pageSize', current: 'pageIndex', tableData: 'data' }
      },
      linkageFormData: {
        keyword: '',
        status: '',
        dateRange: []
      },
      linkageFormConfig: [
        {
          prop: 'keyword',
          label: 'å…³é”®è¯',
          span: 6,
          formtype: 'Input',
          attrs: { placeholder: 'è¯·è¾“å…¥', clearable: true }
        },
        {
          prop: 'status',
          label: 'çŠ¶æ€',
          span: 6,
          formtype: 'Select',
          attrs: { placeholder: 'è¯·é€‰æ‹©', clearable: true },
          dataOptions: [
            { label: 'å…¨éƒ¨', value: '' },
            { label: 'å¯ç”¨', value: '1' },
            { label: 'ç¦ç”¨', value: '0' }
          ]
        },
        {
          prop: 'dateRange',
          label: 'æ—¶é—´èŒƒå›´',
          span: 8,
          formtype: 'datePicker',
          attrs: {
            type: 'datetimerange',
            valueFormat: 'yyyy-MM-dd HH:mm:ss',
            startPlaceholder: 'å¼€å§‹æ—¶é—´',
            endPlaceholder: 'ç»“æŸæ—¶é—´'
          }
        }
      ],
      linkageLayoutProps: {
        fromLayProps: { labelWidth: '80px', size: 'small' },
        rowLayProps: { gutter: 20 }
      },
      linkageConfigBtn: [
        { name: 'æŸ¥è¯¢', type: 'primary', key: 'query', triggerEvent: true, icon: 'el-icon-search' },
        { name: 'é‡ç½®', key: 'rest', triggerEvent: true, icon: 'el-icon-refresh' }
      ],

      // æ“ä½œåˆ—ç¤ºä¾‹
      actionData: [
        { id: 1, name: 'æ”¿ç­–A', status: '1' },
        { id: 2, name: 'æ”¿ç­–B', status: '0' }
      ],
      actionColumns: [
        { key: 'id', label: 'ID', width: 80 },
        { key: 'name', label: 'åç§°' },
        { key: 'status', label: 'çŠ¶æ€' },
        {
          key: 'action',
          label: 'æ“ä½œ',
          width: 200,
          render: (h, { row, index, instance }) => {
            return (
              <div>
                <el-button size="mini" type="text" on-click={() => this.handleView(row)}>æŸ¥çœ‹</el-button>
                <el-button size="mini" type="text" on-click={() => this.handleEdit(row)}>ç¼–è¾‘</el-button>
                {row.status === '0' && (
                  <el-button size="mini" type="text" on-click={() => this.handlePublish(row, instance)}>ä¸Šæ¶</el-button>
                )}
                <el-button size="mini" type="text" style="color: #f56c6c;" on-click={() => this.handleDelete(row, instance)}>åˆ é™¤</el-button>
              </div>
            )
          }
        }
      ],

      // æ”¿ç­–ç®¡ç†å®æˆ˜ç¤ºä¾‹
      policyData: [
        { id: 'P001', title: 'å¤å­£ä¿ƒé”€æ”¿ç­–', status: '1', tags: 'ä¿ƒé”€', publishingMethodName: 'ç«‹å³å‘å¸ƒ', scheduledReleaseTime: '2024-06-01', validDateStart: '2024-06-01', validDateEnd: '2024-08-31', createTime: '2024-05-25', createBy: 'å¼ ä¸‰' },
        { id: 'P002', title: 'æ–°ç”¨æˆ·ä¼˜æƒ ', status: '0', tags: 'ä¼˜æƒ ', publishingMethodName: 'å®šæ—¶å‘å¸ƒ', scheduledReleaseTime: '2024-07-15', validDateStart: '2024-07-15', validDateEnd: '2024-12-31', createTime: '2024-06-10', createBy: 'æå››' }
      ],
      policyColumns: [
        { key: 'id', label: 'æ”¿ç­–ç¼–å·', fixed: 'left', width: 100 },
        { key: 'title', label: 'æ”¿ç­–æ ‡é¢˜', width: 150 },
        { key: 'tags', label: 'æ”¿ç­–æ ‡ç­¾', width: 100 },
        {
          key: 'status',
          label: 'çŠ¶æ€',
          width: 100,
          render: (h, { row }) => {
            const statusMap = { '0': 'è‰ç¨¿', '1': 'ä¸Šæ¶ä¸­', '2': 'å·²ä¸‹æ¶' }
            return <el-tag type={row.status === '1' ? 'success' : 'info'} size="small">{statusMap[row.status]}</el-tag>
          }
        },
        { key: 'publishingMethodName', label: 'å‘å¸ƒæ–¹å¼', width: 100 },
        { key: 'scheduledReleaseTime', label: 'å‘å¸ƒæ—¶é—´', width: 140 },
        { key: 'validDateStart', label: 'ç”Ÿæ•ˆæ—¶é—´', width: 140 },
        { key: 'validDateEnd', label: 'å¤±æ•ˆæ—¶é—´', width: 140 },
        { key: 'createTime', label: 'åˆ›å»ºæ—¶é—´', width: 140 },
        { key: 'createBy', label: 'åˆ›å»ºäºº', width: 100 },
        {
          key: 'action',
          label: 'æ“ä½œ',
          width: 220,
          fixed: 'right',
          render: (h, { row, index, instance }) => {
            return (
              <div>
                <el-button size="mini" type="text" on-click={() => this.$message.info('æŸ¥çœ‹: ' + row.title)}>æŸ¥çœ‹</el-button>
                <el-button size="mini" type="text" on-click={() => this.$message.info('ç¼–è¾‘: ' + row.title)}>ç¼–è¾‘</el-button>
                {(row.status === '0' || row.status === '2') && (
                  <el-button size="mini" type="text" on-click={() => this.$message.success('ä¸Šæ¶æˆåŠŸ')}>ä¸Šæ¶</el-button>
                )}
                {row.status === '1' && (
                  <el-button size="mini" type="text" on-click={() => this.$message.warning('å·²ä¸‹æ¶')}>ä¸‹æ¶</el-button>
                )}
                <el-button size="mini" type="text" style="color: #f56c6c;" on-click={() => this.$message.error('åˆ é™¤: ' + row.title)}>åˆ é™¤</el-button>
              </div>
            )
          }
        }
      ],
      policyPagination: { pageIndex: 1, pageSize: 10, total: 2 },
      policyOptions: {
        border: true,
        tabHeight: 300,
        heightType: 'height',
        size: 'mini'
      },
      policyFormData: {
        policyCode: '',
        policyTitle: '',
        policyStatus: '',
        policyTag: '',
        publishType: '',
        effectiveTimeRange: [],
        publishTimeRange: []
      },
      policyFormConfig: [
        {
          prop: 'policyCode',
          label: 'æ”¿ç­–ç¼–å·',
          span: 8,
          formtype: 'Input',
          formItemOptions: { labelWidth: '100px' },
          attrs: { placeholder: 'è¯·è¾“å…¥æ”¿ç­–ç¼–å·', clearable: true }
        },
        {
          prop: 'policyTitle',
          label: 'æ”¿ç­–åç§°',
          span: 8,
          formtype: 'Input',
          attrs: { placeholder: 'è¯·è¾“å…¥æ”¿ç­–æ ‡é¢˜', clearable: true }
        },
        {
          prop: 'policyStatus',
          label: 'æ–‡ç« çŠ¶æ€',
          span: 8,
          formtype: 'Select',
          formItemOptions: { labelWidth: '100px' },
          attrs: { placeholder: 'è¯·é€‰æ‹©æ–‡ç« çŠ¶æ€', clearable: true },
          dataOptions: [
            { label: 'å…¨éƒ¨', value: '' },
            { label: 'è‰ç¨¿', value: '0' },
            { label: 'ä¸Šæ¶ä¸­', value: '1' },
            { label: 'å·²ä¸‹æ¶', value: '2' }
          ]
        },
        {
          label: 'æ”¿ç­–ç”Ÿæ•ˆæ—¶é—´èŒƒå›´',
          span: 8,
          formItemOptions: { labelWidth: '140px' },
          prop: 'effectiveTimeRange',
          formtype: 'datePicker',
          attrs: {
            valueFormat: 'yyyy-MM-dd HH:mm:ss',
            type: 'datetimerange',
            startPlaceholder: 'å¼€å§‹æ—¥æœŸ',
            endPlaceholder: 'ç»“æŸæ—¥æœŸ',
            style: 'width: 100%'
          }
        }
      ],
      policyLayoutProps: {
        fromLayProps: { minfoldRows: 1, labelWidth: '100px', size: 'small' },
        rowLayProps: { gutter: 20 }
      },
      policyConfigBtn: [
        { direction: 'left', name: 'æ–°å¢', icon: 'el-icon-plus', size: 'mini', type: 'primary', onClick: () => this.$message.success('æ‰“å¼€æ–°å¢å¼¹çª—') },
        { type: 'primary', size: 'mini', name: 'æŸ¥è¯¢', icon: 'el-icon-search', key: 'query', triggerEvent: true },
        { type: 'warning', key: 'rest', size: 'mini', name: 'é‡ç½®', icon: 'el-icon-refresh', triggerEvent: true }
      ],

      // ä»£ç ç¤ºä¾‹
      basicExample,
      autoRequestExample,
      customHttpExample,
      renderColumnExample,
      linkageExample,
      actionColumnExample,
      realWorldExample,

      // ä»£ç æŠ˜å çŠ¶æ€
      codeExpanded: {
        scene1: false,
        scene2: false,
        scene3: false,
        scene4: false,
        scene5: false,
        scene6: false,
        scene7: false
      }
    }
  },
  methods: {
    // ===== ä»£ç æŠ˜å æ§åˆ¶ =====
    toggleCode(scene) {
      this.codeExpanded[scene] = !this.codeExpanded[scene]
    },
    expandAll() {
      Object.keys(this.codeExpanded).forEach(key => {
        this.codeExpanded[key] = true
      })
    },
    collapseAll() {
      Object.keys(this.codeExpanded).forEach(key => {
        this.codeExpanded[key] = false
      })
    },

    handleView(row) {
      this.$message.info(`æŸ¥çœ‹: ${row.name}`)
    },
    handleEdit(row) {
      this.$message.info(`ç¼–è¾‘: ${row.name}`)
    },
    handlePublish(row, instance) {
      this.$message.success(`${row.name} ä¸Šæ¶æˆåŠŸ`)
      // åˆ·æ–°è¡¨æ ¼
      instance?.httpRquestInstace()
    },
    handleDelete(row, instance) {
      this.$confirm(`ç¡®å®šåˆ é™¤ ${row.name} å—ï¼Ÿ`, 'æç¤º', {
        confirmButtonText: 'ç¡®å®š',
        cancelButtonText: 'å–æ¶ˆ',
        type: 'warning'
      }).then(() => {
        this.$message.success('åˆ é™¤æˆåŠŸ')
        instance?.httpRquestInstace()
      })
    }
  }
}
</script>

<style lang="scss">
.docs-container {
  padding: 20px;
  max-width: 1400px;
  margin: 0 auto;

  .docs-header {
    margin-bottom: 30px;

    .global-actions {
      margin-top: 15px;
      padding: 10px 0;
      border-bottom: 1px solid #e4e7ed;
    }
  }

  h1 {
    font-size: 32px;
    margin-bottom: 10px;
    color: #303133;
  }

  .component-desc {
    color: #606266;
    font-size: 16px;
    line-height: 1.6;
    margin-bottom: 30px;
    padding: 15px 20px;
    background: #f5f7fa;
    border-left: 4px solid #409eff;
    border-radius: 4px;
  }

  h2 {
    font-size: 24px;
    margin: 40px 0 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid #409eff;
    color: #303133;
  }

  h3 {
    font-size: 18px;
    color: #303133;
    margin: 30px 0 15px;
    padding-left: 12px;
    border-left: 4px solid #67c23a;
  }

  h4 {
    font-size: 15px;
    color: #303133;
    margin: 20px 0 10px;
  }

  p {
    color: #606266;
    line-height: 1.8;
    margin-bottom: 15px;

    code {
      background: #f4f4f5;
      padding: 2px 8px;
      border-radius: 4px;
      font-family: 'Consolas', monospace;
      color: #e96900;
      font-size: 13px;
    }
  }

  .demo-block {
    border: 1px solid #ebeef5;
    border-radius: 8px;
    margin-bottom: 30px;
    overflow: hidden;
    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);

    &--full {
      .demo-block__body {
        min-height: 400px;
      }
    }

    &__header {
      padding: 15px 20px;
      background: #fafafa;
      border-bottom: 1px solid #ebeef5;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    &__title {
      font-size: 16px;
      font-weight: 500;
      color: #303133;
    }

    &__badge {
      font-size: 12px;
      padding: 2px 10px;
      border-radius: 12px;
      background: #409eff;
      color: #fff;
    }

    &__body {
      padding: 20px;
      background: #fff;
    }

    &__code {
      background: #f5f7fa;
      overflow-x: auto;

      .code-header {
        display: flex;
        align-items: center;
        padding: 10px 15px;
        background: #e4e7ed;
        cursor: pointer;
        user-select: none;
        transition: background 0.2s;
        border-bottom: 1px solid #dcdfe6;

        &:hover {
          background: #d0d3d9;
        }

        i {
          margin-right: 8px;
          font-size: 14px;
          color: #606266;
        }

        span {
          font-size: 13px;
          color: #606266;
        }
      }

      pre {
        margin: 0;
        padding: 15px 20px;
        font-family: 'Consolas', monospace;
        font-size: 13px;
        line-height: 1.6;
        color: #606266;
      }

      code {
        white-space: pre-wrap;
        word-wrap: break-word;
        background: transparent;
        color: #606266;
        padding: 0;
      }
    }
  }

  .tips-box {
    padding: 16px 20px;
    border-radius: 8px;
    margin: 20px 0;

    &--success {
      background: #f0f9eb;
      border: 1px solid #e1f3d8;
      h4 { color: #67c23a; }
    }

    &--warning {
      background: #fdf6ec;
      border: 1px solid #faecd8;
      h4 { color: #e6a23c; }
    }

    &--info {
      background: #f4f4f5;
      border: 1px solid #e9e9eb;
      h4 { color: #909399; }
    }

    h4 {
      margin: 0 0 10px 0;
      font-size: 15px;
    }

    ul, ol {
      margin: 0;
      padding-left: 20px;

      li {
        margin: 8px 0;
        color: #606266;
        line-height: 1.6;
      }
    }

    p {
      margin: 0;
      color: #606266;
    }
  }

  .table-props {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    font-size: 14px;

    th, td {
      padding: 12px 16px;
      text-align: left;
      border: 1px solid #ebeef5;
    }

    th {
      background: #f5f7fa;
      font-weight: 600;
      color: #303133;
    }

    td {
      color: #606266;
    }

    code {
      background: #f4f4f5;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Consolas', monospace;
      color: #e96900;
      font-size: 12px;
    }

    tr:hover {
      background: #f5f7fa;
    }
  }
}
</style>
